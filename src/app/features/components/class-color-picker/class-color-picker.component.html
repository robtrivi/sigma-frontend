<div class="modal-overlay" (click)="onClose()">
  <div class="modal" (click)="$event.stopPropagation()" (keydown.enter)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <h2><i class="pi pi-palette"></i> Seleccionar color para {{ className }}</h2>
      <button class="modal-close" (click)="onClose()" aria-label="Cerrar modal"><i class="pi pi-times"></i></button>
    </div>

    <!-- Modal Content -->
    <div class="modal-content">
      <!-- Input de color nativo -->
      <div class="color-section">
        <label for="color-input" class="color-label">Color personalizado:</label>
        <div class="color-input-wrapper">
          <input 
            id="color-input"
            type="color" 
            [(ngModel)]="selectedColor" 
            (change)="onNativeColorChange()"
            class="color-input"
          >
          <span class="color-value">{{ selectedColor }}</span>
        </div>
      </div>

      <!-- Vista previa -->
      <div class="color-preview-section">
        <label for="preview-label" class="preview-label">Vista previa:</label>
        <div id="preview-label" class="preview-box" [style.background-color]="selectedColor"></div>
      </div>

      <!-- Colores genéricos (colores originales de otras clases) -->
      <div class="generic-colors-section" *ngIf="originalClassColors && originalClassColors.length > 0">
        <label class="generic-label">Colores genéricos:</label>
        <div class="color-grid">
          <button 
            *ngFor="let item of originalClassColors"
            class="color-button"
            [style.background-color]="item.color"
            [class.selected]="selectedColor === item.color"
            (click)="selectGenericColor(item.color)"
            [title]="item.className"
          >
            <span class="checkmark" *ngIf="selectedColor === item.color">✓</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="modal-footer">
      <button class="btn-secondary" (click)="onClose()">Cancelar</button>
      <button class="btn-primary" (click)="onColorChange()">Confirmar</button>
    </div>
  </div>
</div>
